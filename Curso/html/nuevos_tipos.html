<!DOCTYPE html>
<html lang="en"> 

<head>
    <title>Asincronia JavaScript</title>
</head>

<html>

<body>    
    <h1>Asincrionia JavaScript</h1>
    
    <script type="text/javascript">

    //SYMBOL *******************************************************

    //simboy es un nuevo dato primitimo de ECMA-scrip6
    console.log(typeof Symbol());

    //son identificadores unicos 
    console.log(Symbol("id")==Symbol("id"));
    
    //se tiene que invocar como constante, se le puede poner un identificador
    const NOMBRE = Symbol("nombre"),
     SALUDAR = Symbol("saludar");

    const persona = {
        nombre:"Alfredo",
        edad: 20,
        [NOMBRE]: "Drow"    //sirve como un atributo privado en un objeto
    }
    
    console.log(persona);

    //no se lista cuando recorremos el objeto
    for (const key in persona) 
        console.log(key,persona[key]);

    //se pueden listar asi
    console.log(Object.getOwnPropertySymbols(persona));
    
    //tambien puede ser una funcion
    persona[SALUDAR] = () => console.log("hola soy ",persona.nombre);
    
    persona[SALUDAR]();


    //SET *******************************************************

    //es un objeto (conjunto) donde no se repiten los datos
    const set = new Set([2,2,3,12,"hola","hola",true,false,true]);
    console.log(set);

    //tiene la propiedad size en vez de legth
    console.log(set.size);

    //no se puede ingresar a sus posiciones automaticamente
    console.log(set[1]);

    //se puede comvertir a un arreglo para acceder dinamicamente a sus posiciones
    const array = Array.from(set);
    console.log(array);
    console.log(array[3]);

    //es un objeto iterable
    for (const i of set) 
        console.log("i: ",i);

    //añadir un elemento
    set.add("nuevo");
    console.log(set);

    //eliminar un elemento
    set.delete("hola");
    console.log(set);

    //limpiar set
    set.clear();
    console.log(set);


    
    //MAPS *******************************************************

    //es un tipo de dato complejo parecido a los objetos literales
    const mapa = new Map();
    
    //se usan los metodos set u get para ingresar u obtener valores
    mapa.set("nombre","Alfredo");
    mapa.set("alias","drow");
    console.log(mapa);
    console.log(mapa.get("alias"));

    //una propiedad LOCA de los mapas es que como llaves se puede ingresar CUALQUIER valor
    mapa.set(null,"null");
    mapa.set(false,true);
    console.log(mapa);

    //como en el set para saber su tamaño se usa siza en vez de length
    console.log(mapa.size)

    //para saber si una llave esta dentro de un mapa
    console.log(mapa.has("alias"));
    console.log(mapa.has("apellido"));
    
    //para eliminar una llave
    mapa.delete("alias");
    console.log(mapa);

    //es un objeto iterable 
    for (const [key,value] of mapa) 
        console.log("llave: ",key," valor: ",value);

    //sus llaves y valores se pueden convertir en arreglos
    const llaves = [...mapa.keys()],
     valores = [...mapa.values()];

    console.log(llaves,"\n",valores);

    //tambien se pueden constuir directamente
    const mapa2 = new Map([
        ["nombre","Ricardo"],
        ["profesion","Programador"],
        ["existe",false]
    ]);

    console.log(mapa2);


    //WEAKSET Y WEAKMAP *******************************************************

    //son los mismos pero descafeinados
    //no son ITERABLES, no tienen la propiedad SIZE, no se instancean directament
    //el recolector de basura los limpia automaticamente, mejoran el rendimiento

    //weakset
    const wset = new WeakSet();

    let obj1 = {"valor1":2},
     obj2 = {"valor2":3},
     obj3 = {"valor3":8};

    wset.add(obj1);     //no acepta valores repetidos
    wset.add(obj2);     //solo acepta objetos como parametros
    wset.add(obj3);     //no se puede limpiar con .clear()

    console.log(wset);

    obj2=null;
    console.log(wset); //cuando uno de sus valores se nulifica se elimina automaticamente

    //weakmap
    const wmap = new WeakMap();

    let llave1 = {},
     llave2 = {},
     llave3 = {};

    wmap.set(llave1,2); //solo acepta objetos como llave
    wmap.set(llave2,4); //no se puede limpiar con .clear()
    wmap.set(llave3,6); //no se puede iterar

    console.log(wmap);

    //los metodos mas basicos si funcionan
    console.log(wmap.has(llave1));
    console.log(wmap.get(llave3));
    wmap.delete(llave2);
    console.log(wmap);


    //




    
    </script> 
</body>

</html>